ActiveRecord ã§ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ¤œç´¢ã™ã‚‹ã¨ãã€è¿”ã•ã‚Œã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ã‚’åˆ¶é™ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒ2ã¤ã‚ã‚Šã¾ã™ã€‚

* [take](https://guides.rubyonrails.org/active_record_querying.html#take) ãƒ¡ã‚½ãƒƒãƒ‰
* [limit](https://guides.rubyonrails.org/active_record_querying.html#limit-and-offset) ãƒ¡ã‚½ãƒƒãƒ‰

â€»ãƒªãƒ³ã‚¯å…ˆã¯ Rails Guide

ã©ã¡ã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã‚‚ã€SQL ã¨ã—ã¦ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚

```sql
SELECT * FROM table LIMIT n
```

ãã®ãŸã‚ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’10ä»¶ã ã‘å–ã‚ŠãŸã„ã¨ã„ã†å ´åˆã€`take()` ã¨ `limit()` ãã‚Œãã‚Œä¸‹è¨˜ã®ã‚ˆã†ã«ä½¿ç”¨ã§ãã¾ã™ã€‚

```ruby
Pokemon.take(10) #=> 10åŒ¹ã®ãƒã‚±ãƒ¢ãƒ³ãŒè¿”ã•ã‚Œã‚‹
Pokemon.limit(10)ã€€#=> 10åŒ¹ã®ãƒã‚±ãƒ¢ãƒ³ãŒè¿”ã•ã‚Œã‚‹
```

## ã§ã¯ã©ã¡ã‚‰ã‚’ä½¿ã£ãŸã‚‰ã„ã„ï¼Ÿ ğŸ¤”
ä¸¡è€…ã¯å®Ÿè¡Œã—ãŸã¨ãã®æˆ»ã‚Šå€¤ãŒé•ã„ã¾ã™ã€‚

* `take()` ã®å ´åˆã€ Array ã‚’è¿”ã™
* `limit()` ã®å ´åˆã€ ActiveRecord::Relation ã‚’è¿”ã™

ã‚‚ã—ã€ActiveRecord::Relation ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ãªã‚‰ã€`limit()` ã‚’ä½¿ã£ãŸã»ã†ãŒã„ã„ã‹ãªï¼Ÿ

* [ActiveRecord::Relation ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://api.rubyonrails.org/v6.1.0/classes/ActiveRecord/Relation.html)


## ä»–ã«ã¯ã€ãƒ¡ãƒ¢ãƒªã®ã‚µã‚¤ã‚ºãŒé•ã†

ActiveRecord::Relation ã‚’ä½¿ã†å¿…è¦ãŒãªã„å ´åˆã€ã©ã¡ã‚‰ã‚’ã¤ã‹ã†ã‹ï¼Ÿ ğŸ¤”

ãƒ¡ãƒ¢ãƒªã®ã‚µã‚¤ã‚ºãŒå°ã•ã„æ–¹ï¼Ÿå®Ÿéš›ã«ä½¿ç”¨ã•ã‚Œã‚‹ãƒ¡ãƒ¢ãƒªã®ã‚µã‚¤ã‚ºã‚’è¦‹ã¦ã¿ã‚‹ã€‚

```ruby
require 'objspace'
p "Pokemon.take(2): #{Pokemon.take(2)}"
p "Pokemon.take(2): #{Pokemon.take(2).class}"
p "Pokemon.take(2): #{ObjectSpace.memsize_of(Pokemon.take(2))}"
p "--------------------------------------------------"
p "Pokemon.limit(2): #{Pokemon.limit(2)}"
p "Pokemon.limit(2): #{Pokemon.limit(2).class}"
p "Pokemon.limit(2): #{ObjectSpace.memsize_of(Pokemon.limit(2))}"
```

å®Ÿè¡Œçµæœï¼š

```
"Pokemon.take(10): [#<Pokemon id: 1, pokemon_no: 1, name: \"ãƒ•ã‚·ã‚®ãƒ€ãƒ\", stage: 1>, #<Pokemon id: 2, pokemon_no: 2, name: \"ãƒ•ã‚·ã‚®ã‚½ã‚¦\", stage: 2>, #<Pokemon id: 3, pokemon_no: 3, name: \"ãƒ•ã‚·ã‚®ãƒãƒŠ\", stage: 3>, #<Pokemon id: 4, pokemon_no: 891, name: \"ãƒ•ã‚·ã‚®ãƒãƒŠ-1\", stage: 3>, #<Pokemon id: 5, pokemon_no: 4, name: \"ãƒ’ãƒˆã‚«ã‚²\", stage: 1>, #<Pokemon id: 6, pokemon_no: 5, name: \"ãƒªã‚¶ãƒ¼ãƒ‰\", stage: 2>, #<Pokemon id: 7, pokemon_no: 6, name: \"ãƒªã‚¶ãƒ¼ãƒ‰ãƒ³\", stage: 3>, #<Pokemon id: 8, pokemon_no: 892, name: \"ãƒªã‚¶ãƒ¼ãƒ‰ãƒ³-1\", stage: 3>, #<Pokemon id: 9, pokemon_no: 893, name: \"ãƒªã‚¶ãƒ¼ãƒ‰ãƒ³-2\", stage: 3>, #<Pokemon id: 10, pokemon_no: 7, name: \"ã‚¼ãƒ‹ã‚¬ãƒ¡\", stage: 1>]"
"Pokemon.take(10): Array"
"Pokemon.take(10): 40"
"--------------------------------------------------"
"Pokemon.limit(10): #<Pokemon::ActiveRecord_Relation:0x0000563fb6297420>"
"Pokemon.limit(10): Pokemon::ActiveRecord_Relation"
"Pokemon.limit(10): 136"
```

Array ã®ã»ã†ãŒ40ãƒã‚¤ãƒˆã§ãƒ¡ãƒ¢ãƒªã¯ç¯€ç´„ã§ããã†ã ã‘ã©ã€ãã‚‚ãã‚‚`ObjectSpace.memsize_of()`ã§è¡¨ç¤ºã•ã‚Œã‚‹æ•°å­—ã‚’ä¿¡ã˜ã¦åŸºæº–ã«ã—ã¦ã„ã„ã‚‚ã®ã‹ã©ã†ã‹ã‚‚å±ã†ã„ ğŸ˜¨